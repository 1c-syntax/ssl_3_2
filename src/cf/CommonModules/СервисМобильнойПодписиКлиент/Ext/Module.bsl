///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2025, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Добавляет подписанта, если его нет в справочнике. Если есть, добавляет пользователя в подписанта, 
// при этом у него появляются права на редактирование элемента.
// 
// Параметры:
//  ПараметрыПодписанта - Структура:
//    * ОГРН - Строка - (необязательный)
//    * ИНН - Строка 
//    * ИННФЛ - Строка
//    * Имя - Строка 
//    * Отчество - Строка
//    * Фамилия - Строка
//    * НомерТелефона - Строка 
//    * Должность - Строка - (необязательный)
//    * Организация - ОпределяемыйТип.Организация
//    * НаименованиеОрганизации - Строка - (необязательный)
//    * ФизическоеЛицо - ОпределяемыйТип.ФизическоеЛицо - (необязательный)
//    * Наименование - Строка - (необязательный) рассчитывается автоматически
//  ВладелецФормы - ФормаКлиентскогоПриложения - владелец формы
//  ОбработкаЗавершения - Неопределено, ОписаниеОповещения - обработка завершения, 
//                        в которую возвращается результат - ссылка на подписанта или текст ошибки.
//
Процедура ДобавитьПодписанта(ПараметрыПодписанта, ВладелецФормы = Неопределено, ОбработкаЗавершения = Неопределено) Экспорт
	
	ПараметрыФормы = СервисМобильнойПодписиКлиентСервер.ПараметрыПодписанта();
	Если ТипЗнч(ПараметрыПодписанта) = Тип("Структура") Тогда
		ЗаполнитьЗначенияСвойств(ПараметрыФормы, ПараметрыПодписанта);
	КонецЕсли;
	ОткрытьФорму("Справочник.ПодписантыСервисаМобильнойПодписи.Форма.ДобавлениеПодписанта",
		ПараметрыФормы, ВладелецФормы,,,,ОбработкаЗавершения);
		
КонецПроцедуры

// Открывает информацию о документе, отправленном на подписание.
// 
// Параметры:
//  ДанныеПодписи - Структура:
//    * ИдентификаторПодписи - УникальныйИдентификатор - идентификатор, присвоенный документу при отправке в сервис.
//
Процедура ОткрытьПодпись(ДанныеПодписи) Экспорт
	
	Если Не ДанныеПодписи.Свойство("ИдентификаторПодписи") Или Не ЗначениеЗаполнено(ДанныеПодписи.ИдентификаторПодписи) Тогда
		Возврат;
	КонецЕсли;
	
	ТипЗначения = Тип("РегистрСведенийКлючЗаписи.СервисМобильнойПодписиСтатусы");
	Параметры = Новый Массив;
	Параметры.Добавить(Новый Структура("ИдентификаторДокумента", ДанныеПодписи.ИдентификаторПодписи));
	
	КлючЗаписи = Новый(ТипЗначения, Параметры);
	ОткрытьФорму("РегистрСведений.СервисМобильнойПодписиСтатусы.ФормаЗаписи", Новый Структура("Ключ", КлючЗаписи));
	
КонецПроцедуры

// Возвращает структуру с параметрами отправителя, по которым определяется организация - отправитель документов в Госключ.
// 
// Возвращаемое значение:
//  Структура:
//    * Организация - ОпределяемыйТип.Организация
// 
Функция ПараметрыОтправителя() Экспорт
	Возврат Новый Структура("Организация");
КонецФункции

#КонецОбласти

